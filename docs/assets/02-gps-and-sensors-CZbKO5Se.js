import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{P,W as I,S as k,B,a as M,M as y}from"./three.module-Cg0hSL1k.js";import{L as S,H as G,x}from"./locar.es-CLGu3crh.js";const g={latitude:47.41047675920058,longitude:9.332869851461123},d=5,N=16724838,s=new P(80,window.innerWidth/window.innerHeight,.001,1e3),c=new I({canvas:document.getElementById("glscene")});c.setSize(window.innerWidth,window.innerHeight);const m=new k,o=new S(m,s),E=new G({video:{facingMode:"environment"}},null);E.on("webcamstarted",e=>{m.background=e.texture});E.on("webcamerror",e=>{alert(`Webcam error: code ${e.code} message ${e.message}`)});window.addEventListener("resize",()=>{c.setSize(window.innerWidth,window.innerHeight),s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix()});let p=!0,r=!1,i=null;const t={latitude:g.latitude,longitude:g.longitude},l=new x(s);l.on("deviceorientationgranted",e=>{e.target.connect()});l.on("deviceorientationerror",e=>{alert(`Device orientation error: code ${e.code} message ${e.message}`)});l.init();o.on("gpserror",e=>{alert(`GPS error: ${e.code}`)});o.on("gpsupdate",e=>{p&&(alert(`Got the initial location: longitude ${e.position.coords.longitude}, latitude ${e.position.coords.latitude}`),p=!1),r?f():(i=F(),o.add(i,t.longitude,t.latitude),r=!0,h())});o.startGps();const w=document.getElementById("fakeLat"),v=document.getElementById("fakeLon"),R=document.getElementById("setFakeLoc"),T=document.getElementById("resumeRealGps"),W=document.getElementById("moveNorth"),O=document.getElementById("moveSouth"),b=document.getElementById("moveWest"),_=document.getElementById("moveEast");R.addEventListener("click",()=>{const e=parseFloat(w.value),n=parseFloat(v.value);if(Number.isNaN(e)||Number.isNaN(n)){alert("Please enter valid numeric latitude / longitude values.");return}alert("Using fake input GPS, not real GPS location"),o.stopGps(),o.fakeGps(n,e)});T.addEventListener("click",()=>{alert("Resuming real GPS updates"),o.startGps()});W.addEventListener("click",()=>u(d,0));O.addEventListener("click",()=>u(-d,0));b.addEventListener("click",()=>u(0,-d));_.addEventListener("click",()=>u(0,d));c.setAnimationLoop($);function $(){l?.update(),c.render(m,s)}function F(){const e=new B(12,12,12),n=new M({color:N,opacity:.85,transparent:!0}),a=new y(e,n);return a.name="Example POI",a}function f(){if(!r||!i)return;const[e,n]=o.lonLatToWorldCoords(t.longitude,t.latitude);i.position.x=e,i.position.z=n}function h(){w.value=t.latitude.toFixed(8),v.value=t.longitude.toFixed(8)}function u(e,n){if(!r||!i){alert("The AR scene is still initialising. Try again when the red marker is visible.");return}const a=111132,L=Math.max(Math.cos(t.latitude*Math.PI/180)*a,1e-6);t.latitude+=e/a,t.longitude+=n/L,f(),h()}
