import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{P,W as B,S as k,B as x,a as y,M}from"./three.module-Cg0hSL1k.js";import{L as S,H as G,x as b}from"./locar.es-CLGu3crh.js";const g={latitude:47.41047675920058,longitude:9.332869851461123},d=5,N=16724838,s=new P(80,window.innerWidth/window.innerHeight,.001,1e3),c=new B({canvas:document.getElementById("glscene")});c.setSize(window.innerWidth,window.innerHeight);const m=new k,o=new S(m,s),E=new G({video:{facingMode:"environment"}},null);E.on("webcamstarted",e=>{m.background=e.texture});E.on("webcamerror",e=>{alert(`Webcam error: code ${e.code} message ${e.message}`)});window.addEventListener("resize",()=>{c.setSize(window.innerWidth,window.innerHeight),s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix()});let p=!0,r=!1,i=null;const n={latitude:g.latitude,longitude:g.longitude},l=new b(s);l.on("deviceorientationgranted",e=>{e.target.connect()});l.on("deviceorientationerror",e=>{alert(`Device orientation error: code ${e.code} message ${e.message}`)});l.init();o.on("gpserror",e=>{alert(`GPS error: ${e.code}`)});o.on("gpsupdate",e=>{p&&(alert(`Got the initial location: longitude ${e.position.coords.longitude}, latitude ${e.position.coords.latitude}`),p=!1),A(e.position.coords.latitude,e.position.coords.longitude),r?L():(i=z(),o.add(i,n.longitude,n.latitude),r=!0,h())});o.startGps();const w=document.getElementById("fakeLat"),v=document.getElementById("fakeLon"),C=document.getElementById("setFakeLoc"),F=document.getElementById("resumeRealGps"),R=document.getElementById("moveNorth"),$=document.getElementById("moveSouth"),T=document.getElementById("moveWest"),W=document.getElementById("moveEast"),f=document.getElementById("deviceCoords"),O=document.getElementById("poiCoords");C.addEventListener("click",()=>{const e=parseFloat(w.value),t=parseFloat(v.value);if(Number.isNaN(e)||Number.isNaN(t)){alert("Please enter valid numeric latitude / longitude values.");return}alert("Using fake input GPS, not real GPS location"),o.stopGps(),o.fakeGps(t,e)});F.addEventListener("click",()=>{alert("Resuming real GPS updates"),f.textContent="waiting for GPS…",o.startGps()});R.addEventListener("click",()=>u(d,0));$.addEventListener("click",()=>u(-d,0));T.addEventListener("click",()=>u(0,-d));W.addEventListener("click",()=>u(0,d));c.setAnimationLoop(_);function _(){l?.update(),c.render(m,s)}function z(){const e=new x(12,12,12),t=new y({color:N,opacity:.85,transparent:!0}),a=new M(e,t);return a.name="Example POI",a}function L(){if(!r||!i)return;const[e,t]=o.lonLatToWorldCoords(n.longitude,n.latitude);i.position.x=e,i.position.z=t}function h(){w.value=n.latitude.toFixed(8),v.value=n.longitude.toFixed(8),O.textContent=`${n.latitude.toFixed(6)}°, ${n.longitude.toFixed(6)}°`}function u(e,t){if(!r||!i){alert("The AR scene is still initialising. Try again when the red marker is visible.");return}const a=111132,I=Math.max(Math.cos(n.latitude*Math.PI/180)*a,1e-6);n.latitude+=e/a,n.longitude+=t/I,L(),h()}function A(e,t){Number.isFinite(e)&&Number.isFinite(t)&&(f.textContent=`${e.toFixed(6)}°, ${t.toFixed(6)}°`)}
