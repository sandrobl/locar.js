import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{P as b,W as M,S as G,L as F,H as N,x as T,B as O,a as R,M as W,b as _,E as $,c as A}from"./locar.es-CoMYR9AI.js";const w={latitude:47.41047675920058,longitude:9.332869851461123},l=5,D=[16724838,16762173,5231045,3711337,6717162,16156595],H=.6,d=new b(80,window.innerWidth/window.innerHeight,.001,1e3),u=new M({canvas:document.getElementById("glscene")});u.setSize(window.innerWidth,window.innerHeight);const m=new G,a=new F(m,d),B=new N({video:{facingMode:"environment"}},null);B.on("webcamstarted",e=>{m.background=e.texture});B.on("webcamerror",e=>{alert(`Webcam error: code ${e.code} message ${e.message}`)});window.addEventListener("resize",()=>{u.setSize(window.innerWidth,window.innerHeight),d.aspect=window.innerWidth/window.innerHeight,d.updateProjectionMatrix()});let L=!0,s=!1,o=null;const t={latitude:w.latitude,longitude:w.longitude};let c=null;const g=new T(d);g.on("deviceorientationgranted",e=>{e.target.connect()});g.on("deviceorientationerror",e=>{alert(`Device orientation error: code ${e.code} message ${e.message}`)});g.init();a.on("gpserror",e=>{alert(`GPS error: ${e.code}`)});a.on("gpsupdate",e=>{const{latitude:n,longitude:i}=e.position.coords;L&&(alert(`Got the initial location: longitude ${i}, latitude ${n}`),L=!1),X(n,i),s?E():(t.latitude=n,t.longitude=i,o=k(),a.add(o,t.longitude,t.latitude),s=!0,p())});a.startGps();const x=document.getElementById("fakeLat"),h=document.getElementById("fakeLon"),z=document.getElementById("setFakeLoc"),j=document.getElementById("resumeRealGps"),U=document.getElementById("moveNorth"),V=document.getElementById("moveSouth"),Y=document.getElementById("moveWest"),q=document.getElementById("moveEast"),J=document.getElementById("removePoi"),K=document.getElementById("resetPoi"),y=document.getElementById("deviceCoords"),P=document.getElementById("poiCoords"),I=document.getElementById("gpsinput"),r=document.getElementById("gpsinputToggle");z.addEventListener("click",()=>{const e=parseFloat(x.value),n=parseFloat(h.value);if(Number.isNaN(e)||Number.isNaN(n)){alert("Please enter valid numeric latitude / longitude values.");return}alert("Using fake input GPS, not real GPS location"),a.stopGps(),a.fakeGps(n,e)});j.addEventListener("click",()=>{alert("Resuming real GPS updates"),y.textContent="waiting for GPS…",a.startGps()});U.addEventListener("click",()=>f(l,0));V.addEventListener("click",()=>f(-l,0));Y.addEventListener("click",()=>f(0,-l));q.addEventListener("click",()=>f(0,l));J.addEventListener("click",Z);K.addEventListener("click",ee);r&&I&&r.addEventListener("click",()=>{const e=I.classList.toggle("gpsinput-collapsed");r.setAttribute("aria-expanded",(!e).toString()),r.textContent=e?"► Controls":"▼ Controls",r.title=e?"Show testing controls":"Hide testing controls"});u.setAnimationLoop(Q);function Q(){g?.update(),u.render(m,d)}function k(){const e=new O(12,12,12),n=D.map(S=>new R({color:S,opacity:H,transparent:!0})),i=new W(e,n),v=new _({color:16777215,opacity:.3,transparent:!0}),C=new $(e);return i.add(new A(C,v)),i.name="Example POI",i}function E(){if(!s||!o)return;const[e,n]=a.lonLatToWorldCoords(t.longitude,t.latitude);o.position.x=e,o.position.z=n}function p(){x.value=t.latitude.toFixed(8),h.value=t.longitude.toFixed(8),s?P.textContent=`${t.latitude.toFixed(6)}°, ${t.longitude.toFixed(6)}°`:P.textContent="none"}function f(e,n){if(!s||!o){alert("The AR scene is still initialising. Try again when the red marker is visible.");return}const i=111132,v=Math.max(Math.cos(t.latitude*Math.PI/180)*i,1e-6);t.latitude+=e/i,t.longitude+=n/v,E(),p()}function X(e,n){Number.isFinite(e)&&Number.isFinite(n)&&(y.textContent=`${e.toFixed(6)}°, ${n.toFixed(6)}°`,c={latitude:e,longitude:n})}function Z(){if(!s||!o){alert("No cube to remove right now.");return}m.remove(o),o=null,s=!1,p()}function ee(){if(!c){alert("Device location not available yet. Wait for GPS before resetting the cube.");return}t.latitude=c.latitude,t.longitude=c.longitude,!s||!o?(o=k(),a.add(o,t.longitude,t.latitude),s=!0):E(),p()}
