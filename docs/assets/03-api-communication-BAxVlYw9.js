import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import{P as l,W as m,S as w,L as g,x as u,H as f,B as h,N as b,M as y,a as $}from"./locar.es-CoMYR9AI.js";const t=new l(80,window.innerWidth/window.innerHeight,.001,1e3),i=new m({canvas:document.getElementById("glscene")});i.setSize(window.innerWidth,window.innerHeight);const s=new w,o=new g(s,t),r=new u(t);r.on("deviceorientationgranted",e=>{e.target.connect()});r.on("deviceorientationerror",e=>{alert(`Device orientation error: code ${e.code} message ${e.message}`)});r.init();const p=new f({video:{facingMode:"environment"}},null);p.on("webcamstarted",e=>{s.background=e.texture});p.on("webcamerror",e=>{alert(`Webcam error: code ${e.code} message ${e.message}`)});window.addEventListener("resize",e=>{i.setSize(window.innerWidth,window.innerHeight),t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix()});let c=!0;const d={},k=new h(20,20,20),v=new b(i);o.on("gpserror",e=>{alert(`GPS error: code ${e.code}`)});o.on("gpsupdate",async e=>{(c||e.distMoved>100)&&((await(await fetch(`https://hikar.org/webapp/map?bbox=${e.position.coords.longitude-.02},${e.position.coords.latitude-.02},${e.position.coords.longitude+.02},${e.position.coords.latitude+.02}&layers=poi&outProj=4326`)).json()).features.forEach(n=>{if(!d[n.properties.osm_id]){const a=new y(k,new $({color:16711680}));o.add(a,n.geometry.coordinates[0],n.geometry.coordinates[1],0,n.properties),d[n.properties.osm_id]=a}}),c=!1)});document.getElementById("setFakeLoc").addEventListener("click",e=>{alert("Using fake input GPS, not real GPS location"),o.stopGps(),o.fakeGps(parseFloat(document.getElementById("fakeLon").value),parseFloat(document.getElementById("fakeLat").value))});o.startGps();i.setAnimationLoop(G);function G(){r.update();const e=v.raycast(t,s);e.length&&alert(`This is ${e[0].object.properties.name}`),i.render(s,t)}
